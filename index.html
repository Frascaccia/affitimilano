<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <title>affitimilano.it - Cerchi affitti a Milano?</title>
    
    <!-- Google Analytics 4 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-PFE51BL46D"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-PFE51BL46D');
    </script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
    
    <style>
     /* ===== RESET & BASE ===== */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
    color: #2d3748;
    line-height: 1.6;
}

/* ===== CONTAINER ===== */
.container {
    max-width: 700px;
    width: 100%;
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
    border-radius: 24px;
    overflow: hidden;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
    animation: fadeIn 0.8s ease-out;
    border: 1px solid rgba(255, 255, 255, 0.2);
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(30px); }
    to { opacity: 1; transform: translateY(0); }
}

/* ===== HEADER ===== */
.header {
    background: linear-gradient(135deg, #2d3748 0%, #4a5568 100%);
    color: white;
    padding: 50px 40px;
    text-align: center;
    position: relative;
    overflow: hidden;
}

.header::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px);
    background-size: 30px 30px;
    opacity: 0.3;
    animation: float 20s linear infinite;
}

@keyframes float {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

.logo {
    font-size: 3.2rem;
    font-weight: 700;
    letter-spacing: -0.5px;
    margin-bottom: 15px;
    position: relative;
    z-index: 1;
    font-family: 'Poppins', sans-serif;
    background: linear-gradient(135deg, #fff 0%, #a0aec0 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.subtitle {
    font-size: 1.3rem;
    opacity: 0.9;
    font-weight: 400;
    position: relative;
    z-index: 1;
    max-width: 500px;
    margin: 0 auto;
}

/* ===== CONTENT ===== */
.content {
    padding: 50px 40px;
}

.welcome-box {
    background: linear-gradient(135deg, #ebf8ff 0%, #bee3f8 100%);
    border-radius: 16px;
    padding: 30px;
    margin-bottom: 40px;
    border-left: 5px solid #4299e1;
    box-shadow: 0 8px 25px rgba(66, 153, 225, 0.1);
}

.welcome-icon {
    font-size: 2.5rem;
    margin-bottom: 15px;
    display: block;
}

.welcome-title {
    font-size: 1.6rem;
    color: #2b6cb0;
    margin-bottom: 10px;
    font-weight: 600;
}

/* ===== LINKS GRID ===== */
.links-title {
    font-size: 1.8rem;
    color: #2d3748;
    text-align: center;
    margin-bottom: 35px;
    font-weight: 600;
    position: relative;
    padding-bottom: 15px;
}

.links-title::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 80px;
    height: 4px;
    background: linear-gradient(90deg, #4299e1, #38b2ac);
    border-radius: 2px;
}

.links-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 20px;
    margin-bottom: 50px;
}

.link-card {
    background: white;
    border-radius: 16px;
    padding: 30px;
    text-decoration: none;
    color: #2d3748;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    border: 2px solid #e2e8f0;
    position: relative;
    overflow: hidden;
}

.link-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, #4299e1, #38b2ac);
}

.link-card:hover {
    transform: translateY(-8px);
    border-color: #4299e1;
    box-shadow: 0 20px 40px rgba(66, 153, 225, 0.15);
}

.link-icon {
    font-size: 2.8rem;
    margin-bottom: 20px;
    display: block;
    transition: transform 0.3s ease;
}

.link-card:hover .link-icon {
    transform: scale(1.1);
}

.link-name {
    font-size: 1.4rem;
    font-weight: 600;
    margin-bottom: 10px;
    color: #2d3748;
}

.link-desc {
    font-size: 0.95rem;
    color: #718096;
    line-height: 1.5;
}

/* ===== AUTO-REDIRECT ===== */
.redirect-box {
    background: linear-gradient(135deg, #f0fff4 0%, #c6f6d5 100%);
    border: 2px dashed #48bb78;
    border-radius: 16px;
    padding: 35px;
    text-align: center;
    margin: 40px 0;
    position: relative;
    overflow: hidden;
}

.redirect-box::before {
    content: '‚ú®';
    position: absolute;
    top: -20px;
    right: -20px;
    font-size: 5rem;
    opacity: 0.1;
    transform: rotate(30deg);
}

.redirect-title {
    font-size: 1.4rem;
    color: #276749;
    margin-bottom: 15px;
    font-weight: 600;
}

.cta-button {
    display: inline-flex;
    align-items: center;
    gap: 12px;
    background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
    color: white;
    padding: 18px 45px;
    font-size: 1.2rem;
    font-weight: 600;
    border-radius: 12px;
    text-decoration: none;
    transition: all 0.3s ease;
    box-shadow: 0 10px 30px rgba(72, 187, 120, 0.3);
    border: none;
    cursor: pointer;
    margin: 15px 0;
}

.cta-button:hover {
    transform: translateY(-3px) scale(1.05);
    box-shadow: 0 15px 35px rgba(72, 187, 120, 0.4);
}

.cta-button::after {
    content: '‚Üí';
    font-size: 1.4rem;
    transition: transform 0.3s ease;
}

.cta-button:hover::after {
    transform: translateX(5px);
}

.timer {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    background: white;
    padding: 14px 24px;
    border-radius: 50px;
    margin-top: 25px;
    font-size: 1rem;
    color: #4a5568;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
}

.timer-icon {
    font-size: 1.2rem;
    animation: spin 2s linear infinite;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

#countdown {
    font-weight: 700;
    color: #2d3748;
    font-size: 1.2rem;
    min-width: 30px;
    text-align: center;
}

/* ===== FOOTER ===== */
.footer {
    background: #2d3748;
    color: #cbd5e0;
    padding: 30px 40px;
    text-align: center;
    border-top: 1px solid #4a5568;
}

.disclaimer {
    font-size: 0.9rem;
    line-height: 1.5;
    max-width: 600px;
    margin: 0 auto 20px;
    opacity: 0.8;
}

.copyright {
    font-size: 0.8rem;
    color: #a0aec0;
    margin-top: 15px;
}

/* ===== BANNER RESPONSIVE FOOTER ===== */
.footer-banner-container {
    width: 100%;
    max-width: 728px;
    margin: 20px auto;
    text-align: center;
    overflow: hidden;
    background: #1a202c;
    border-radius: 8px;
    padding: 10px;
}

.footer-banner-wrapper {
    position: relative;
    width: 100%;
    height: 90px;
    display: flex;
    justify-content: center;
    align-items: center;
}

.footer-banner-wrapper > div,
.footer-banner-wrapper ins,
.footer-banner-wrapper iframe,
#container-666ab4fedb8ca0356424e9fb7d465e43,
.footer-banner-wrapper * {
    width: 100% !important;
    max-width: 728px !important;
    height: 90px !important;
    margin: 0 auto !important;
    display: block !important;
    overflow: hidden !important;
}

/* ===== RESPONSIVE ===== */
@media (max-width: 768px) {
    .container {
        border-radius: 20px;
        max-width: 95%;
    }
    
    .header {
        padding: 40px 25px;
    }
    
    .logo {
        font-size: 2.5rem;
    }
    
    .content {
        padding: 35px 25px;
    }
    
    .links-grid {
        grid-template-columns: 1fr;
        gap: 15px;
    }
    
    .link-card {
        padding: 25px;
    }
    
    .redirect-box {
        padding: 25px;
    }
    
    .cta-button {
        width: 100%;
        justify-content: center;
    }
    
    .footer {
        padding: 25px;
    }
    
    /* Mobile banner */
    .footer-banner-container {
        margin: 15px auto;
        padding: 8px;
        max-width: 95%;
    }
    
    .footer-banner-wrapper {
        height: 75px !important;
    }
    
    .footer-banner-wrapper > div,
    .footer-banner-wrapper ins,
    .footer-banner-wrapper iframe,
    #container-666ab4fedb8ca0356424e9fb7d465e43,
    .footer-banner-wrapper * {
        max-width: 468px !important;
        height: 75px !important;
    }
}

@media (max-width: 480px) {
    .logo {
        font-size: 2rem;
    }
    
    .subtitle {
        font-size: 1.1rem;
    }
    
    .welcome-title {
        font-size: 1.4rem;
    }
    
    .links-title {
        font-size: 1.5rem;
    }
    
    .footer-banner-wrapper {
        height: 50px !important;
    }
    
    .footer-banner-wrapper > div,
    .footer-banner-wrapper ins,
    .footer-banner-wrapper iframe,
    #container-666ab4fedb8ca0356424e9fb7d465e43,
    .footer-banner-wrapper * {
        max-width: 320px !important;
        height: 50px !important;
    }
}
    </style>


</head>
<body>

<div id="container-666ab4fedb8ca0356424e9fb7d465e43"></div>

    <div class="container">
        <!-- Header -->
        <header class="header">
			<script type="text/javascript">
  atOptions = {
  	'key' : 'e48a76fea22d12815ef78cf1759d54aa',
  	'format' : 'iframe',
  	'height' : 90,
  	'width' : 728,
  	'params' : {}
  };
</script>
<script
  type="text/javascript"
  src="//www.highperformanceformat.com/e48a76fea22d12815ef78cf1759d54aa/invoke.js"
></script> 
            <h1 class="logo">affitimilano.it</h1>
            <p class="subtitle">Hai digitato un indirizzo simile a siti di affitti?</p>
        </header>
        
        <!-- Main Content -->
        <main class="content">
            <!-- Welcome Message -->
            <div class="welcome-box">
                <span class="welcome-icon">‚ÑπÔ∏è</span>
                <h2 class="welcome-title">Forse cercavi portali di affitti a Milano</h2>
                <p>Hai digitato "affitimilano.it" Non esiste un sito ufficiale con questo nome, ma ecco i migliori portali per cercare casa a Milano.</p>
            </div>
            
            <!-- Recommended Sites -->
            <h2 class="links-title"> I 4 migliori siti per affitti a Milano</h2>
            
            <div class="links-grid">
                <!-- Immobiliare.it -->
                <a href="https://www.immobiliare.it/affitto-case/milano/" 
                   class="link-card" 
                   target="_blank"
                   onclick="return trackClick('Immobiliare.it', 'https://www.immobiliare.it/affitto-case/milano/', event)">
                    <span class="link-icon">üè†</span>
                    <h3 class="link-name">Immobiliare.it</h3>
                    <p class="link-desc">Il portale pi√π completo con oltre 30.000 annunci verificati a Milano e provincia.</p>
                </a>
                
                <!-- Casa.it -->
                <a href="https://www.casa.it/affitto/milano" 
                   class="link-card" 
                   target="_blank"
                   onclick="return trackClick('Casa.it', 'https://www.casa.it/affitto/milano', event)">
                    <span class="link-icon">üè¢</span>
                    <h3 class="link-name">Casa.it</h3>
                    <p class="link-desc">Interfaccia intuitiva e annunci aggiornati in tempo reale per tutta Milano.</p>
                </a>
                
                <!-- Subito.it -->
                <a href="https://www.subito.it/annunci-lombardia/affitto/appartamento/milano/" 
                   class="link-card" 
                   target="_blank"
                   onclick="return trackClick('Subito.it', 'https://www.subito.it/annunci-lombardia/affitto/appartamento/milano/', event)">
                    <span class="link-icon">üì±</span>
                    <h3 class="link-name">Subito.it</h3>
                    <p class="link-desc">Annunci privati e agenzie, ottimo per trovare occasioni e contratti diretti.</p>
                </a>
                
                <!-- Idealista -->
                <a href="https://www.idealista.it/affitto-case/milano-milano/" 
                   class="link-card" 
                   target="_blank"
                   onclick="return trackClick('Idealista', 'https://www.idealista.it/affitto-case/milano-milano/', event)">
                    <span class="link-icon">üìä</span>
                    <h3 class="link-name">Idealista</h3>
                    <p class="link-desc">Mappa interattiva e filtri avanzati per trovare la zona perfetta a Milano.</p>
                </a>
            </div>

<script type="text/javascript">
  atOptions = {
  	'key' : '7dfcfc9805c733f570652bd6c58aa8a8',
  	'format' : 'iframe',
  	'height' : 600,
  	'width' : 160,
  	'params' : {}
  };
</script>
<script
  type="text/javascript"
  src="//www.highperformanceformat.com/7dfcfc9805c733f570652bd6c58aa8a8/invoke.js"
></script>
            <!-- Auto-Redirect Section -->
            <div class="redirect-box">
                <h3 class="redirect-title">üéÅ Consiglio: inizia da qui</h3>
                <p style="color: #4a5568; margin-bottom: 20px;">Per la ricerca pi√π completa, ti consigliamo di iniziare da Immobiliare.it che ha il database pi√π aggiornato.</p>
                
                <a href="https://www.immobiliare.it/affitto-case/milano/" 
                   class="cta-button"
                   target="_blank"
                   onclick="return trackClick('Immobiliare.it - CTA', 'https://www.immobiliare.it/affitto-case/milano/', event)">
                   Vai a Immobiliare.it Milano
                </a>
                
                <div class="timer">
                    <span class="timer-icon">üîÑ</span>
                    <span>Reindirizzamento automatico tra</span>
                    <span id="countdown">10</span>
                    <span>secondi...</span>
                </div>
            </div>
        </main>
        
        <!-- Footer -->
        <footer class="footer">
            <p class="disclaimer">
                <strong>Nota importante:</strong> Questo sito (affitimilano.it) non √® un portale immobiliare. 
                √à un dominio registrato per aiutare gli utenti che digitano erroneamente indirizzi simili a siti di affitti. 
                Forniamo solo link di reindirizzamento ai principali portali immobiliari italiani per facilitare la ricerca.
            </p>
            <p class="copyright">
                ¬© 2025 affitimilano.it | Domini simili: affittimilano.com
            </p>
				<script type="text/javascript">
  atOptions = {
  	'key' : 'e48a76fea22d12815ef78cf1759d54aa',
  	'format' : 'iframe',
  	'height' : 90,
  	'width' : 728,
  	'params' : {}
  };
</script>
<script
  type="text/javascript"
  src="//www.highperformanceformat.com/e48a76fea22d12815ef78cf1759d54aa/invoke.js"
></script>
        </footer>
    </div>

    <!-- JavaScript -->
<script>
// Auto-redirect timer
let countdown = 10;
const countdownElement = document.getElementById('countdown');
let redirectTimer;
let userClicked = false;

function startTimer() {
    console.log('DEBUG: startTimer chiamato');
    console.log('DEBUG: Elemento countdown trovato?', !!countdownElement);
    
    if (!countdownElement) {
        console.error('Elemento countdown non trovato!');
        return;
    }
    
    console.log('Timer iniziato. Countdown:', countdown);
    countdownElement.textContent = countdown;
    
    redirectTimer = setInterval(() => {
        countdown--;
        countdownElement.textContent = countdown;
        
        console.log('Countdown:', countdown);
        
        if (countdown <= 0) {
            clearInterval(redirectTimer);
            countdownElement.textContent = 'reindirizzamento...';
            
            // Traccia SOLO se non ha cliccato
            if (!userClicked && typeof gtag !== 'undefined') {
                console.log('Traccio auto_redirect');
                gtag('event', 'auto_redirect', {
                    'event_category': 'user_engagement',
                    'event_label': 'redirect_after_10s'
                });
            }
            
            setTimeout(() => {
                window.location.href = "https://www.immobiliare.it/affitto-case/milano/";
            }, 500);
        }
    }, 1000);
}

// Funzione per tracciare click
function trackClick(linkName, linkUrl, event) {
    console.log('DEBUG: trackClick chiamato per', linkName);
    
    // Previeni comportamento predefinito
    if (event) {
        event.preventDefault();
        event.stopPropagation();
    }
    
    userClicked = true;
    console.log('Click tracciato su:', linkName, 'URL:', linkUrl);
    
    // Traccia con GA4
    if (typeof gtag !== 'undefined') {
        gtag('event', 'link_click', {
            'event_category': 'outbound',
            'event_label': linkName,
            'event_value': 1,
            'link_url': linkUrl
        });
    } else {
        console.warn('gtag non disponibile al momento del click');
    }
    
    // Ferma il timer
    if (redirectTimer) {
        clearInterval(redirectTimer);
        if (countdownElement) {
            countdownElement.textContent = 'reindirizzamento...';
        }
    }
    
    // Redirect dopo breve delay
    setTimeout(() => {
        console.log('Eseguo redirect a:', linkUrl);
        window.location.href = linkUrl;
    }, 200);
    
    return false;
}

// Inizializza tutto quando il DOM √® pronto
document.addEventListener('DOMContentLoaded', function() {
    console.log('DOMContentLoaded - Inizializzo tracciamento');
    
    // DEBUG: verifica che gtag sia disponibile
    if (typeof gtag !== 'undefined') {
        console.log('‚úÖ gtag √® disponibile');
    } else {
        console.warn('‚ö†Ô∏è gtag non disponibile al DOMContentLoaded');
    }
    
    // Traccia pageview
    if (typeof gtag !== 'undefined') {
        gtag('event', 'page_view', {
            'page_title': document.title,
            'page_location': window.location.href,
            'page_referrer': document.referrer
        });
    }
    
    // Avvia il timer immediatamente
    startTimer();
});

// Traccia uscita senza click
window.addEventListener('beforeunload', function() {
    if (!userClicked && countdown > 0 && typeof gtag !== 'undefined') {
        console.log('Traccio exit_without_click, countdown:', countdown);
        
        gtag('event', 'exit_without_click', {
            'event_category': 'user_behavior',
            'event_label': 'bounced_before_redirect',
            'value': countdown,
            'transport_type': 'beacon'
        });
    }
});

// Debug: verifica che gtag sia caricato
let gtagCheckInterval = setInterval(() => {
    if (typeof gtag !== 'undefined') {
        console.log('‚úÖ GA4 gtag √® caricato correttamente');
        clearInterval(gtagCheckInterval);
    }
}, 100);

// Dopo 5 secondi, se gtag non √® caricato, avvisa
setTimeout(() => {
    if (typeof gtag === 'undefined') {
        console.warn('‚ö†Ô∏è GA4 gtag non √® stato caricato dopo 5 secondi');
    }
}, 5000);
</script>
</body>
</html>
